[{"content":"For whatever reason I decided to give VIM a chance\u0026hellip; crazy guy I am :)\nOn a bit more serious note, I\u0026rsquo;m sure that VIM is really powerful if you ever get hang of it.\nIn the past I worked for a long time with Sublime Text 3, which is really great! And in the last ~ year I switched to Visual Studio Code, which is great as well! Especially the multicursor mode is a nifty feature.\nAnyway, I found a really nice VIM cheatsheet, this post will contain the shortcuts which I find the most useful (and probably forget the easiest).\nCursor movement    Key Function     fx jump to next occurrence of character x, e.G. fr jumps to the next r in the text   tx jump to before next occurrence of character x, same as tx but lands before the occurrence   Fx jump to previous occurence of character x, same as the two above, but in the other direction   Tx jump to after previous occurence of character x   ; repeat previous f, t, F or T movement   , repeat previous f, t, F or T movement, backwards    Editing    Key Function     J join line below to the current one with one space in between   gwip reshuffle the paragraph you are currently in   gu change to lowercase up to motion, e.G. gue changes all chars to the end of the word to lower case   gU change to uppercase up to motion, e.G. gU$ changes the whole line to upper case   xp switches two letters (delete and paste)   . repeat last command    Marking text, or visual mode    Key Function     aw mark a word   a{ mark the respective parenthesis block   ~ switch case   u change marked text to lowercase   U change marked text to uppercase    Marks and positioning    Key Function     :marks list of marks   ma set current position for mark A    `a jump to position of mark A   y`a yank text to position of mark A   Ctrl + i go to newer position in jump list   Ctrl + o go to older position in jump list    Macros    Key Function     qa record macro a   q stop recording macro   @a run macro a   @@ rerun last run macro    Cut and paste    Key Function     yy yank (copy) a line   2yy yank (copy) 2 lines   yw yank (copy) the characters of the word from the cursor position to the start of the next word   yiw yank (copy) word under the cursor   yaw yank (copy) word under the cursor and the space after or before it   y$ yank (copy) to end of line    Working with multiple files    Key Function     Ctrl + ws split window   Ctrl + wv split window vertically    Manipulating numbers    Key Function     Ctrl + a Increase the first digit or number on the current line   Ctrl + x Decrease the first digit or number on the current line   g Ctrl + a Visual Mode: Increase the first digit or number on the current line, but increasingly. e.g. first line +1, second line +2, and so on   g Ctrl + x Visual Mode: Decrease the first digit or number on the current line, but increasingly. e.g. first line +1, second line +2, and so on    ","date":"2022-02-28T18:00:00Z","permalink":"https://www.richardstrnad.ch/2022/02/28/some-nice-and-helpful-vim-shortcuts/","title":"Some nice and helpful VIM shortcuts"},{"content":"If you are like me and a bit lazy, the touch id is a really nice addition from Apple. It allows for easy lock/unlock of the mac itself and for some authentication within.\nBy default the touch id is not used for sudo commands in the terminal. For which you will be asked for a password as usual. But it is possible to use the touch id for sudo commands as well, for this you need an extension of the /etc/pam.d/sudo file.\nAdd the following entry auth sufficient pam_tid.so, the file should look like this file should look like this.\n1 2 3 4 5 6 7  # sudo: auth account password session auth sufficient pam_tid.so auth sufficient pam_smartcard.so auth required pam_opendirectory.so account required pam_permit.so password required pam_deny.so session required pam_permit.so   Addition for tmux users\nI started to use tmux recently and the Touch ID for sudo stopped working. To renable it, you first need to install pam_reattach, then edit the /etc/pam.d/sudo file like this.\n1 2 3 4 5 6 7 8  # sudo: auth account password session auth optional pam_reattach.so auth sufficient pam_tid.so auth sufficient pam_smartcard.so auth required pam_opendirectory.so account required pam_permit.so password required pam_deny.so session required pam_permit.so   ","date":"2022-02-16T07:45:46+01:00","permalink":"https://www.richardstrnad.ch/2022/02/16/apple-macos-touch-id-for-sudo/","title":"Apple macOS Touch ID for Sudo"},{"content":"A colleague has exchanged a spine at a customer. This is a lab fabric which runs in a minimal setup, 1 x APIC, 1 x Spine, 4 x Leaf.\nIn principle, the exchange of a Spine within an ACI fabric is a very simple undertaking, ACI does all the heavy lifting for you :)\nHowever, in a scenario where a Leaf has only one path to the APIC (thus connected to a single Spine), the exchange of the Spine leads to problems.\n1 2 3 4 5  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ APIC ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚î§ L111 ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚î§ S101 ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚î§ L112 ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   Sample Topology\nAfter replaceing the Spine, L112 wasn\u0026rsquo;t joined in the fabric anymore. On the switch itself it was then pretty easy to spot the issue.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24  L112# show discoveryissues Checking the platform type................LEAF! Check01 - System state - in-service [ok] Check02 - DHCP status [ok] TEP IP: 10.0.200.66 Node Id: 111 Name: LEAF111 Check03 - AV details check [ok] Check04 - IP rechability to apic [FAIL] Ping from switch to 10.0.0.1 with MTU 1450 failed. Check Communication issues. Check05 - infra VLAN received [ok] infra vLAN:4093 Check06 - LLDP Adjacency [FAIL] Error: wiring issue found unapproved-serialnumber on eth1/54 Check07 - Switch version [ok] version: n9000-14.2(7f) and apic version: 4.2(7f) Check08 - FPGA/BIOS out of sync test [ok] Check09 - SSL check [check] SSL certificate details are valid Check10 - Downloading policies [ok] Check11 - Checking time [ok] 2022-02-09 10:33:24 Check12 - Checking modules, power and fans [ok] Check13 - Checking isis adjacencies [FAIL] No isis adjacencies found Ignore if first leaf/spine in an ACI fabric or remote leaf   show discoveryissues from L112\nError: wiring issue found unapproved-serialnumber on eth1/54\nIndicates that from the Leaf perspective the new Spine is not approved to the fabric and because the Leaf has no path to the APIC anymore, this information can\u0026rsquo;t be updated.\nEasiest fix we found, was to simply reset the leaf.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  L112# setup-clean-config.sh In progress In progress In progress In progress In progress In progress In progress In progress In progress In progress In progress In progress In progress In progress In progress Done   And then do a reload.\n1 2  L112# reload This command will reload the chassis, Proceed (y/n)? [n]: y   Thanks to Jonas for the story \u0026amp; the outputs.\n","date":"2022-02-10T08:00:00+01:00","permalink":"https://www.richardstrnad.ch/2022/02/10/aci-spine-replacement-in-a-single-spine-fabric/","title":"ACI: Spine replacement in a single Spine fabric"},{"content":"All new stuff is directly added to my netwrk.ch blog: https://netwrk.ch/posts/restconf/\nI decided to migrate this blog here, which was based on wordpress for the past 8 years, to hugo. For this reason, all technical information stays here üòÅ\nThis post is a work in progress, as i\u0026rsquo;m currently using Restconf for different customer, I want to save/post some of the infos i discovered. Get a Portchannel Subinterface\nBase URL for all the following examples\n1  https://{HOST}:{PORT}/restconf/data/   In the beginning i really struggled to find the right models, what can help is the yang representation you can find on github posted by cisco.\nAn important concept to understand is the split between configuration \u0026amp; operational data (Which makes sense as the devices itself always worked like that). Thankfully the naming of the resource gives a good hint what data you can expect. If there is a -oper in the name, you are querying for operational data.\nExample Paths for configuration Get a Portchannel Subinterface\n1  Cisco-IOS-XE-native:native/interface/Port-channel-subinterface/Port-channel=1.600   Delete a Portchannel Subinterface, difference to Get is that you make a DELETE call to the API\n1  Cisco-IOS-XE-native:native/interface/Port-channel-subinterface/Port-channel=1.600   Get a Interface/Subinterface, here it\u0026rsquo;s important to escape the / in the name\n1 2 3 4  import requests INTERFACE = requests.utils.quote(\u0026#34;1/0/1.3204\u0026#34;, safe=\u0026#39;\u0026#39;) Cisco-IOS-XE-native:native/interface/HundredGigE={INTERFACE}\u0026#39;   Get the configuration for a specific vrf\n1  Cisco-IOS-XE-native:native/vrf/definition=TEST   Example Paths for operational data Operational information about all the vrfs\n1  Cisco-IOS-XE-vrf-oper:vrf-oper-data   Operational information about all the interfaces\n1  Cisco-IOS-XE-interfaces-oper:interfaces   Operational information for a specific interfaces, here it\u0026rsquo;s also important again to escape the / in the name\n1 2 3 4  import requests INTERFACE = requests.utils.quote(\u0026#34;1/0/1.3204\u0026#34;, safe=\u0026#39;\u0026#39;) Cisco-IOS-XE-interfaces-oper:interfaces/interface=HundredGigE{INTERFACE}   Python examples These are really simple examples that can hopefully help you to get on speed (and help me remember how this stuff works) :)\nCreate a new VRF This examples creates a new vrf on the defined switch. It only works when the vrf doesn\u0026rsquo;t already exists.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35  import requests requests.packages.urllib3.disable_warnings() HOST = \u0026#39;1.1.1.1\u0026#39; PORT = 443 USER = \u0026#39;user\u0026#39; PASS = \u0026#39;password\u0026#39; def main(): url = f\u0026#39;https://{HOST}:{PORT}/restconf/data/Cisco-IOS-XE-native:native/vrf\u0026#39; headers = { \u0026#39;Content-Type\u0026#39;: \u0026#39;application/yang-data+json\u0026#39;, \u0026#39;Accept\u0026#39;: \u0026#39;application/yang-data+json\u0026#39; } data = { \u0026#34;Cisco-IOS-XE-native:definition\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;RESTCONF\u0026#34; } } response = requests.post( url, auth=(USER, PASS), headers=headers, verify=False, json=data ) print(response) if __name__ == \u0026#39;__main__\u0026#39;: main()   Update a VRF The update process works a bit different, the following example shows how to add an additional rt to the vrf TEST\nExample of the vrf before our change\n1 2 3 4 5 6 7 8 9  vrf definition TEST rd 1:1 ! address-family ipv4 route-target export 1:1 route-target export 3:3 route-target import 1:1 route-target import 2:2 exit-address-family   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52  import requests requests.packages.urllib3.disable_warnings() HOST = \u0026#39;1.1.1.1\u0026#39; PORT = 443 USER = \u0026#39;user\u0026#39; PASS = \u0026#39;password\u0026#39; def main(): url = f\u0026#39;https://{HOST}:{PORT}/restconf/data/Cisco-IOS-XE-native:native\u0026#39; headers = { \u0026#39;Content-Type\u0026#39;: \u0026#39;application/yang-data+json\u0026#39;, \u0026#39;Accept\u0026#39;: \u0026#39;application/yang-data+json\u0026#39; } data = { \u0026#34;native\u0026#34;:{ \u0026#34;vrf\u0026#34;: { \u0026#34;definition\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;TEST\u0026#34;, \u0026#34;address-family\u0026#34;: { \u0026#34;ipv4\u0026#34;: { \u0026#34;route-target\u0026#34;: { \u0026#34;import-route-target\u0026#34;: { \u0026#34;without-stitching\u0026#34;: [ { \u0026#34;asn-ip\u0026#34;: \u0026#34;5:5\u0026#34; } ] } } } } } } } } response = requests.patch( url, auth=(USER, PASS), headers=headers, verify=False, json=data ) print(response.text) if __name__ == \u0026#39;__main__\u0026#39;: main()   And then the VRF after the change\n1 2 3 4 5 6 7 8 9 10 11  Current configuration : 212 bytes vrf definition TEST rd 1:1 ! address-family ipv4 route-target export 1:1 route-target export 3:3 route-target import 1:1 route-target import 2:2 route-target import 5:5 exit-address-family   ","date":"2021-11-24T12:41:48Z","permalink":"https://www.richardstrnad.ch/2021/11/24/cisco-restconf-cheatsheet/","title":"Cisco RestConf Cheatsheet"},{"content":"It happend to me more than once, that i needed the basic parameters that were used during the initial setup of the Fabric. For example if you configure a standby APIC later on, or if you (for whatever reason) reset and APIC and redo the initial configuration dialog.\nOf course, we always document everything we do, so we could simply look the information up in the documentation! But there is a faster way, just hop onto one of the APICs and use a small cat command.\n1  cat /data/data_admin/sam_exported.config   This gives you back all the of the base parameters you used, during the initial setup.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  apic01# cat /data/data_admin/sam_exported.config Setup for Active and Standby APIC fabricDomain = DC fabricID = 1 systemName = apic01 controllerID = 1 tepPool = 100.64.0.0/16 infraVlan = 3967 GIPo = 225.0.0.0/15 clusterSize = 3 standbyApic = NO enableIPv4 = Y enableIPv6 = N firmwareVersion = 4.2(7f) ifcIpAddr = 100.64.0.1 apicX = NO podId = 1 oobIpAddr = 10.100.0.1/24   Afterword\nMy colleague Matthias (A daily reader of the blog), pointed out that the sam_exported.config is only present in newer version. If the command doesn\u0026rsquo;t work for you, check out the attached Technote from Cisco üôÇ\nACI Technote - Find Setup config values  ","date":"2021-10-27T05:57:36Z","permalink":"https://www.richardstrnad.ch/2021/10/27/how-to-read-out-the-used-aci-basic-parameters/","title":"How to read out the used ACI basic parameters"},{"content":"Today I integrated a NDB Controller VM with the ISE (TACACS) of a customer. As it wasn\u0026rsquo;t that easy to find the correct shell profile config, i thought that I will post it here as documentation üôÇ\nPossible cisco-av-pair\u0026rsquo;s for the NDB controller VM.\nWrite (Admin)\n1  shell:roles=network-admin   Read (Admin)\n1  shell:roles=network-operator   ","date":"2021-07-30T18:05:58Z","permalink":"https://www.richardstrnad.ch/2021/07/30/aaa-tacacs-configuration-for-ndb/","title":"AAA (TACACS+) configuration for NDB"},{"content":"After nearly 7 years with self hosted wordpress i had the feeling that a change is required üòÄ I stumbled across HUGO and decided to give it a try. For now i use github pages together with travis for a simple CICD pipeline to deploy the page.\nHead over to my new page and check it out. https://richardstrnad.github.io/\n","date":"2021-01-06T19:00:46Z","permalink":"https://www.richardstrnad.ch/2021/01/06/testing-github-pages/","title":"Testing Github Pages"},{"content":"Cisco provides a custom ESXi Image/ISO to (re)install Hyperflex Servers. As i\u0026rsquo;m currently working on fully automating the deployment of a large quantity of there servers, i looked for a way to automate the reinstall of these Hyperflex Servers.\nUnfortunately the ESXi Image provided by Cisco requires a confirmation at some point, i wanted to get rid of this. First i downloaded the current ISO file from Cisco (HX-ESXi-6.7U3-16316930-Cisco-Custom-6.7.3.5-install-only.iso).\nCreate the Image 1 2 3 4 5 6 7 8 9 10 11  cd /tmp mkdir iso cd iso mkdir ro_iso mkdir custom device=$(hdiutil attach -nomount ~/Downloads/HX-ESXi-6.7U3-16316930-Cisco-Custom-6.7.3.5-install-only.iso | \\ egrep \u0026#39;^/dev/\u0026#39; | sed 1q | awk \u0026#39;{print $1}\u0026#39;) mount -t cd9660 $device /tmp/iso/ro_iso cd ro_iso tar cf - . | (cd /tmp/iso/custom; tar xfp -) cd ../custom   This mounts the original ISO to a new folder and then copies everything to another folder where we can do the changes we want. I changed the following in the ISOLINUX.CFG file.\nYou can find the ISOLINUX.CFG file i created here.\nAfter that you build the image, i run the mkisofs twice to include the files that are generated bi isohybrid.pl (ISOLINUX.BIN).\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  sudo mkisofs -o UNATTENDED_HX-ESXi-6.7U3-16316930-Cisco-Custom-6.7.3.5-install-only.iso \\ -b ISOLINUX.BIN \\ -c BOOT.CAT \\ -no-emul-boot \\ -boot-load-size 4 \\ -boot-info-table \\ -J -R -V \u0026#34;UNATTENDED_ESX\u0026#34; . wget https://gist.githubusercontent.com/jsarenik/e184b4061263dbd7d3a3/raw/861da48e3f32138400cf966ca0d498e67575ce0d/isohybrid.pl chmod +x isohybrid.pl sudo ./isohybrid.pl UNATTENDED_HX-ESXi-6.7U3-16316930-Cisco-Custom-6.7.3.5-install-only.iso sudo mkisofs -o UNATTENDED_HX-ESXi-6.7U3-16316930-Cisco-Custom-6.7.3.5-install-only.iso \\ -b ISOLINUX.BIN \\ -c BOOT.CAT \\ -no-emul-boot \\ -boot-load-size 4 \\ -boot-info-table \\ -J -R -V \u0026#34;UNATTENDED_ESX\u0026#34; .   After that your iso is ready. Cleanup\n1 2  umount $device hdiutil detach $device   How to use the Image unattended You have now an image which doesn\u0026rsquo;t need any confirmation, but how to use it unattended. I put it on an http server from which it can be retrieved. Then i use the following snippet on the CIMC CLI to reinstall the server.\n1 2 3 4 5 6 7 8 9 10  scope bios set boot-order cdrom,hdd,fdd,pxe,efi commit exit scope vmedia map-www ESX http://SERVERIP:SERVERPORT UNATTENDED_HX-ESXi-6.7U3-16316930-Cisco-Custom-6.7.3.5-install-only.iso exit scope chassis power cycle y   ","date":"2020-12-16T19:00:24Z","permalink":"https://www.richardstrnad.ch/2020/12/16/custom-hyperflex-esx-image/","title":"Custom Hyperflex ESX Image"},{"content":"As i described in another Post there is the possibility to change a ACI Leaf Uplink Port to Downlink mode. This can be useful if you require some 40/100G Ports but don\u0026rsquo;t want to add new Leafs.\nIf you now wan\u0026rsquo;t to convert some of these Downlinks back to Uplinks, you can follow this guide here.\nNavigate to Fabric -\u0026gt; Pod and select the Leaf on which you wan\u0026rsquo;t to change the Port behaviour.\nChange to the Interface Tab and select \u0026ldquo;Configuration\u0026rdquo; on the right side.\nNow select the Interfaces you wish to change and then select \u0026ldquo;Uplink\u0026rdquo;.\nYou then need to confirm the action, to make the change active you have to reload the ACI Leaf switch.\nThat\u0026rsquo;s it, after the Switch is reloaded the interfaces are back in Uplink mode an can be connected to the Spines üôÇ\n","date":"2019-07-29T17:30:21Z","permalink":"https://www.richardstrnad.ch/2019/07/29/cisco-aci-convert-leaf-ports-back-downlink-to-uplink/","title":"Cisco ACI ‚Äì Convert Leaf Ports back (Downlink to Uplink)"},{"content":"Sometimes it\u0026rsquo;s required to reset a controller, this can be done from the cli. First login to the controller you wish to reset\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26  ‚Üí ssh admin@192.168.128.8 Avi Cloud Controller Avi Networks software, Copyright (C) 2013-2017 by Avi Networks, Inc. All rights reserved. Version: 18.2.2 Date: 2019-03-06 09:07:37 UTC Build: 9224 Management: 192.168.128.8/24 UP Gateway: 192.168.128.1 UP admin@192.168.128.8\u0026#39;s password: The copyrights to certain works contained in this software are owned by other third parties and used and distributed under license. Certain components of this software are licensed under the GNU General Public License (GPL) version 2.0 or the GNU Lesser General Public License (LGPL) Version 2.1. A copy of each such license is available at http://www.opensource.org/licenses/gpl-2.0.php and http://www.opensource.org/licenses/lgpl-2.1.php admin@192-168-128-8:~$   After that you need to switch to the AVI Shell and there you can issue the reboot clean command. Credentials for the AVI Shell are the same as for the SSH Login.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  admin@192-168-128-8:~$ shell Login: admin Password: [admin:192-168-128-8]: \u0026gt; reboot clean This will erase the entire configuration and reboot the cluster Would you like to proceed? (yes/no): yes This may take 2-3 minutes to complete. Please wait... Lost connectivity to the controller -- Retrying to connect Re-established connectivity -- Please retry the command Broadcast message from root@192-168-128-8 (somewhere) (Fri Mar 8 16:46:51 2019) Rebooting this VM because of the cluster event \u0026#39;clean reboot\u0026#39;   ","date":"2019-03-08T21:00:20Z","permalink":"https://www.richardstrnad.ch/2019/03/08/avi-networks-reset-controller/","title":"AVI Networks ‚Äì Reset Controller"},{"content":"Since ACI release 3.1(1) it\u0026rsquo;s possible to use some of the Leaf Uplinks as Downlink Ports. This could help you out if there is a need for some 40/100G ports but you are currently only running 10/25G Leafs.\nCurrently the following Leafs support the conversion:\nN9K-C9348GC-FXP  N9K-C93180LC-EX   N9K-C93180YC-FX  N9K-C93180YC-EX and N9K-C93180YC-EXU  N9K-C93108TC-EX  N9K-C93108TC-FX  N9K-C9336C-FX2 (only downlink to uplink conversion supported)   There are some limitations, check them out on the Cisco Page.\nOur use case was to use some of the 40/100G Ports as Downlinks on a N9K-C93180YC-FX. The main limitation there is that the last 2 ports (53 and 54) don\u0026rsquo;t support conversion, no issue if you use them as Uplinks anyway.\nThe conversion process is pretty straight forward.\nHead to Fabric -\u0026gt; Inventory, open up the respective POD and select your Leaf.\nGo to the \u0026ldquo;Interface\u0026rdquo; tab and change the mode to \u0026ldquo;Configuration\u0026rdquo;\nNow select the port you want to change from uplink to downlink and then select \u0026ldquo;Downlink\u0026rdquo;.\nThere will be a popup with the information about the change, \u0026ldquo;Submit\u0026rdquo; it.\nAnd that\u0026rsquo;s it, repeat for all the other interfaces you want to convert. Then reload the Leaf.\n","date":"2018-10-01T18:00:28Z","permalink":"https://www.richardstrnad.ch/2018/10/01/cisco-aci-convert-leaf-uplink-to-downlink/","title":"Cisco ACI ‚Äì Convert Leaf Ports (Uplink to Downlink)"},{"content":"Some time ago i posted how to convert a ACI switch to NX-OS, now the other way around.\nCopy the file to the NX-OS Mode N9k\n1 2 3 4 5 6 7  switch# copy scp: bootflash: Enter source filename: Downloads/aci-n9000-dk9.12.2.1o.bin Enter vrf (If no input, current vrf \u0026#39;default\u0026#39; is considered): management Enter hostname for the scp server: 192.168.0.5 Enter username: USER Password: aci-n9000-dk9.12.2.1o.bin 1% 15MB 3.8MB/s 04:34 ETA   Change the boot mode to aci\n1 2 3 4 5 6  switch(config)# boot aci bootflash:///aci-n9000-dk9.12.2.1o.bin Warning: Please check list of all ACI supported hardware before doing this operation, not all hardware are supported. Warning: Booting to an ACI image will remove all nxos configuration and format bootflash. Do you want to continue (y/n)?[n] y Performing image verification and compatibility check, please wait.... Image verification successful.   That\u0026rsquo;s it, just boot the switch and you can join the fabric üôÇ\nBe aware that the first reload can take quite some time! (15minutes+)\n1 2 3  switch# reload !!!WARNING! there is unsaved configuration!!! This command will reboot the system. (y/n)? [n] y   ","date":"2017-04-12T21:13:17Z","permalink":"https://www.richardstrnad.ch/2017/04/12/acin9k-how-to-convert-a-nexus-9000-from-nx-os-to-aci/","title":"ACI/N9K ‚Äì How to convert a Nexus 9000 from NX-OS to ACI"},{"content":"The Issue We implemented a new UCS-Mini for a customer with existing Nexus 5548UP (5.1(3)N1(1a)), on the SAN Part we faced some strange issues:\n1 2 3 4 5  2017 Mar 25 12:11:30 NEX5548-2 %PORT-5-IF_DOWN_PORT_CHANNEL_MEMBERS_DOWN: %$VSAN 300%$ Interface san-port-channel 200 is down (No operational members) 2017 Mar 25 12:11:31 NEX5548-2 Mar 25 12:11:31 %KERN-3-SYSTEM_MSG: fc2_nsh_tx_frame: FC2 s_id/d_id/vsan error: sid=0xfffffe,did=0x0,vsan=300,rctl:0x23,type:0x1,oxid 0x4d,rxid:0xff25 - kernel 2017 Mar 25 12:12:10 NEX5548-2 %PORT-5-IF_PORT_QUIESCE_FAILED: Interface fc1/20 port quiesce failed due to failure reason: Force Abort Due to Link Failure (NOS/LOS) (0x119) 2017 Mar 25 12:12:10 NEX5548-2 %PORT-5-IF_DOWN_OLS_RCVD: %$VSAN 300%$ Interface fc1/20 is down (OLS received) san-port-channel 200 2017 Mar 25 12:12:10 NEX5548-2 Mar 25 12:12:10 %KERN-3-SYSTEM_MSG: fc2_nsh_tx_frame: FC2 s_id/d_id/vsan error: sid=0xfffffe,did=0x0,vsan=300,rctl:0x23,type:0x1,oxid 0x5a,rxid:0xff32 - kernel   The san-port-channel was really basic and added to just one VSAN\n1 2 3 4 5 6 7  interface san-port-channel 200 channel mode active switchport mode F switchport trunk mode off vsan 220 interfaces: san-port-channel 100 san-port-channel 200   There was also an existing UCS where the san-port-channel worked without any issue\n1 2  san-port-channel 100 is up Hardware is Fibre Channel   Solution After some looking around i found a bug that matched pretty good on the cisco page.\nI checked the MAC OUI on the UCS Mini\n1 2 3 4 5 6 7  UCS-Mini-A# connect nxos . . UCS-Mini-A(nxos)# show int fc1/1 fc1/1 is down Hardware is Fibre Channel, SFP is short wave laser w/o OFC (SN) Port WWN is XX:XX:00:de:fb:XX:XX:XX   These matches the OUIs described in the bug\n Add MAC OUI \u0026ldquo;002a6a\u0026rdquo;, \u0026ldquo;8c604f\u0026rdquo;, \u0026ldquo;00defb\u0026rdquo; for 5k/UCS-FI\n After upgrading the Nexus 5548UP to 5.2.1.N1.9b i was finally able to bring the san-port-channel up between the Nexus and the UCS-Mini.\n1 2 3 4 5 6 7  Software BIOS: version 3.6.0 loader: version N/A kickstart: version 5.2(1)N1(9b) system: version 5.2(1)N1(9b) 2017 Mar 26 07:52:12 NEX5548-2 %PORT-5-IF_UP: %$VSAN 300%$ Interface san-port-channel 200 is up in mode F   ","date":"2017-03-30T17:00:55Z","permalink":"https://www.richardstrnad.ch/2017/03/30/unable-to-create-san-port-channel-between-nexus-5548up-and-ucs-mini/","title":"Unable to create San-Port-Channel Between Nexus 5548UP and UCS(-Mini)"},{"content":"We faced some strange ICMP redirect messages today on one of our devices after we configured BFD for BGP.\nDevice1\n1 2 3 4 5 6  ICMP: bogus redirect from 192.168.100.1 - for 192.168.100.2 use gw 192.168.100.2 gateway address is one of our addresses ICMP: bogus redirect from 192.168.100.1 - for 192.168.100.2 use gw 192.168.100.2 gateway address is one of our addresses ICMP: bogus redirect from 192.168.100.1 - for 192.168.100.2 use gw 192.168.100.2 gateway address is one of our addresses   So we checked the device that was sending these redirects and did a short ethanalyzer capture\nDevice2\n1 2 3 4 5 6  ethanalyzer local interface inband-in vdc vdc2 capture-filter \u0026#34;host 192.168.100.2\u0026#34; limit-captured-frames 0 Capturing on inband 192.168.200.2 -\u0026gt; 192.168.200.2 UDP 60 Source port: 49152 Destination port: bfd-echo 192.168.200.2 -\u0026gt; 192.168.200.2 UDP 60 Source port: 49152 Destination port: bfd-echo 192.168.200.2 -\u0026gt; 192.168.200.2 UDP 60 Source port: 49152 Destination port: bfd-echo 192.168.200.2 -\u0026gt; 192.168.200.2 UDP 60 Source port: 49152 Destination port: bfd-echo   So these redirect messages where triggered from the BFD Echo packets that Device2 received from Device1.\nWe simply forgot to disable `ip redirects` on the interface between Device2 and Device1, after we changed this the ICMP bogus redirect messages where gone.\n1 2  interface port-channel1 no ip redirects   This is documented on various points on the cisco page, for example here.\n Before using BFD echo mode, you must disable the sending of Internet Control Message Protocol (ICMP) redirect messages by entering the no ip redirects command, in order to avoid high CPU utilization.\n ","date":"2017-03-23T18:30:47Z","permalink":"https://www.richardstrnad.ch/2017/03/23/bfd-and-ip-redirects/","title":"BFD and IP redirects"},{"content":"I just got the mail that i was accepted to the Cisco Champions 2017 program, this is the first year for me!\nWhat makes a Cisco Champion? Quote from Cisco.com:\n Passion, plus a desire to share their perspectives with the community. There are Cisco Champions all over the world. They represent a variety of segments across the IT industry. And they offer their time to help others learn about Cisco and connect with Cisco in unique ways.\n Thanks to Cisco for the opportunity to be member of this program!\n  ","date":"2017-02-06T15:23:50Z","permalink":"https://www.richardstrnad.ch/2017/02/06/cisco-champion-2017/","title":"Cisco Champion 2017"},{"content":"2016 is over, at least here in switzerland. It was an interesting year for me, i attend my first Cisco Live (@Vegas) and had to recertify my CCIE for the first time. As the new year starts i\u0026rsquo;m taking a new challenge @Netcloud as Network Engineer. I have different things that i want to accomplish in 2017.\n   Title Description     Run on 200 days About 4 Days a week, this will be hard but should be doable   First Marathon Already booked, Berlin in September   Read 26 Books I will create a list and keep track of this on a separate post   Improve my Spanish I learned some basic Spanish skills last year and put them in use on my trip to central america, but i definitely want improve   Get my CCIE Datacenter I\u0026rsquo;m already working on this   Blog Redesign An easy one, but it\u0026rsquo;s time for a new look    ","date":"2017-01-01T07:00:39Z","permalink":"https://www.richardstrnad.ch/2017/01/01/happy-new-year-resolutions-for-2017/","title":"Happy New Year \u0026 Resolutions for 2017"},{"content":"I had a issue today with running remote commands on one of my fabric switches, always generated an error.\n1 2 3 4 5  apic1# fabric leaf02 show switchname ---------------------------------------------------------------- Node 102 (leaf02) ---------------------------------------------------------------- Error: Error executing command on leaf02. Error Code: 255   I tried to directly connect and found the error\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  admin@apic1:attach leaf02 This command is being deprecated on APIC controller, please use NXOS-style equivalent command # Executing command: ssh leaf02 -b 10.127.240.1 @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ @ WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED! @ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY! Someone could be eavesdropping on you right now (man-in-the-middle attack)! It is also possible that the RSA host key has just been changed. The fingerprint for the RSA key sent by the remote host is d1:f1:c4:8a:3e:a7:df:4a:76:bf:ec:01:bb:0d:28:99. Please contact your system administrator. Add correct host key in /home/admin/.ssh/known_hosts to get rid of this message. Offending key in /home/admin/.ssh/known_hosts:2 Password authentication is disabled to avoid man-in-the-middle attacks. Keyboard-interactive authentication is disabled to avoid man-in-the-middle attacks. Permission denied (publickey,password,keyboard-interactive).   I think this was the switch that i converted to NX-OS standalone mode, and thus it changed the host key.\nThe fix is easy, open the file and delete the offending key\n1  vi /home/admin/.ssh/known_hosts   After that i was able to run commands from the apic and also connect to the fabric switch again.\n","date":"2016-11-11T13:32:59Z","permalink":"https://www.richardstrnad.ch/2016/11/11/error-error-executing-command-on-leaf02-error-code-255/","title":"Error: Error executing command on leaf02. Error Code: 255"},{"content":"With the introduction of the NX-OS like CLI Cisco also added the option to run commands on the switches directly from your apic. It\u0026rsquo;s now even easier to get some infos from one or multiple switches in your fabric.\nShow switchname on a single fabric switch\n1 2 3 4 5  apic1# fabric leaf01 show switchname ---------------------------------------------------------------- Node 101 (leaf01) ---------------------------------------------------------------- leaf01   You can also run commands on multiple devices\n1 2 3 4 5 6 7 8 9  apic1# fabric leaf01, leaf02 show switchname ---------------------------------------------------------------- Node 101 (leaf01) ---------------------------------------------------------------- leaf01 ---------------------------------------------------------------- Node 102 (leaf02) ---------------------------------------------------------------- leaf02   The list of possible commands is pretty long, just to give an idea\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68  aaa aaa bfd BFD commands bgp Display BGP status and configuration cdp Show Cisco Discovery Protocol information clock Display current Date coop Show information about coop copp Control Plane Policing (CoPP) information copyright Copyright information cores Show all core dumps for the current vdc dhcp Show DHCP diagnostic Diagnostic commands dpp Data Plane Policing (DPP) information eigrp Display EIGRP status and configuration endpoint End point environment Environment Information fc2 Show fc2 information fcoe Show FCOE paramaters fex Show FEX information forwarding Display mfdm information hardware Show hardware information hostname Hostname hsrp HSRP information interface Show interface status and information inventory system inventory information ip Display IP information ipmgr Show information about ipmgr ipv6 Show IPv6 information isis Display IS-IS status and configuration istack Show istack information lacp LACP protocol lldp Show information about lldp locator-led Blink locator led on device logging logging information mac Mac addr information mcp Show information about mcp mfdm Show MFDM information module Module monitor Show SPAN information npv Show Npv information ntp Show NTP information oam Show information about oam ospfv3 Display OSPFv3 status and configuration port-channel Show port-channel information porttrack Port Tracking processes Show processes radius-server Radius-server redundancy Show system redundancy status resource Show resource configuration for VDC route-map Route-map information routing Display routing information san-port-channel Show san-port-channel information service Display service information snmp Display SNMP information sprom show SPROM contents stats_manager Show information about stats_manager switchname Show the system\u0026#39;s hostname system System-related commands tacacs-server Tacacs-server tunnel Show information about Tunnel users Show users logged onto the system and their sessions vdc Show information about vdc_mgr version Show running firmware version and basic system information vlan VLAN status vpc Virtual Port Channel configuration vrf Display VRF information vsan Show vsan information zoning-filter Display Zoning-Filter information zoning-rule Display Zoning-Rule information   This can be a really nice way to collect some quick info from different nodes in a ACI fabric.\n","date":"2016-11-07T08:32:33Z","permalink":"https://www.richardstrnad.ch/2016/11/07/cisco-aci-run-commands-on-the-switches-from-your-apic/","title":"Cisco ACI ‚Äì Run Commands on the Switches from your APIC"},{"content":"Some time ago i posted how you can connect to a spine or leaf switch -\u0026gt; Connect to a leaf/spine switch\nWith the introduction of NX-OS, the syntax changed a bit. You have now first to drop back to the bash shell and then you can attach the switches. Password is still the same as for the APIC.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  apic1# bash admin@apic1:~\u0026gt; attach leaf01 This command is being deprecated on APIC controller, please use NXOS-style equivalent command # Executing command: ssh leaf01 -b 10.127.240.1 Password: Cisco Nexus Operating System (NX-OS) Software TAC support: http://www.cisco.com/tac Copyright (c) 2002-2016, Cisco Systems, Inc. All rights reserved. The copyrights to certain works contained in this software are owned by other third parties and used and distributed under license. Certain components of this software are licensed under the GNU General Public License (GPL) version 2.0 or the GNU Lesser General Public License (LGPL) Version 2.1. A copy of each such license is available at http://www.opensource.org/licenses/gpl-2.0.php and http://www.opensource.org/licenses/lgpl-2.1.php leaf01#   There is also the possibility to directly run show commands from the APIC.\nRun Commands on the Fabric Switches from your APIC\n","date":"2016-11-06T21:06:01Z","permalink":"https://www.richardstrnad.ch/2016/11/06/cisco-aci-connect-to-the-leafspine-switches-with-the-nx-os/","title":"Cisco ACI ‚Äì Connect to the leaf/spine switches with the NX-OS bash"},{"content":"Example script to print all your fabric nodes.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  from acitoolkit.acitoolkit import Session from acitoolkit.aciphysobject import Node url = \u0026#39;https://apic\u0026#39; user = \u0026#39;user\u0026#39; pw = \u0026#39;pw\u0026#39; session = Session(url, user, pw) session.login() nodes = Node.get(session) for node in nodes: print(\u0026#39;=\u0026#39; * 50) print(\u0026#39;Pod: {}\u0026#39;.format(node.pod)) print(\u0026#39;Node: {}\u0026#39;.format(node.node)) print(\u0026#39;Mode: {}\u0026#39;.format(node.mode)) print(\u0026#39;Model: {}\u0026#39;.format(node.model)) print(\u0026#39;Vendor: {}\u0026#39;.format(node.vendor)) print(\u0026#39;Serial: {}\u0026#39;.format(node.serial))   ","date":"2016-10-27T16:56:16Z","permalink":"https://www.richardstrnad.ch/2016/10/27/acitoolkit-get-all-nodes/","title":"Acitoolkit ‚Äì Get all Nodes"},{"content":"I tried to create a new port-profile on a Nexus 1000V and got the error\n1  2016 Oct 14 10:33:35 N1Kv %MSP-5-PP_UPDATE_FAILED: Update of port-profile \u0026#39;New-Port-Group\u0026#39; on the vCenter Server failed. Please verify port-profile config.   This error can appear if you configure more max-ports on the port-profiles than you specified in the \u0026lsquo;svs connection vcenter\u0026rsquo;. In my case i had overprovisioned the port-profiles with \u0026lsquo;max-group 512\u0026rsquo;, so i just reduced the max-port on some port-profiles and this solved the issue.\n","date":"2016-10-18T10:00:02Z","permalink":"https://www.richardstrnad.ch/2016/10/18/nexus-1000v-port-profile-error-msp-5-pp_update_failed/","title":"Nexus 1000v ‚Äì Port-Profile Error ‚ÄòMSP-5-PP_UPDATE_FAILED‚Äô"},{"content":"I struggled to configure external authentication on a APIC-EM Controller, i followed the official cisco guide. According to the guide the radius server should return \u0026lsquo;Scope: Scope:ALL, Role:ROLE_ADMIN\u0026rsquo; but this is wrong!\nCorrect is Scope=ALL: Role=ROLE_ADMIN\nBefore that i always got a \u0026lsquo;Invalid Login Credentials\u0026rsquo;, not the best error message üôÇ\n","date":"2016-10-12T14:10:30Z","permalink":"https://www.richardstrnad.ch/2016/10/12/apic-em-external-authentication-invalid-login-credentials/","title":"APIC-EM ‚Äì External Authentication ‚ÄòInvalid Login Credentials‚Äô"},{"content":"I wrote a small python script that can decrypt cisco type 7 passwords.\nCisco7Decrypt on Github\nYou can decrypt password directly through the CLI:\n1 2  ‚Üí python cisco7decrypt.py 12090404011C03162E password   If you want the command accessible from anywhere, just link it to a folder that\u0026rsquo;s included in your Path. In this example \u0026lsquo;~/bin\u0026rsquo;\n1  ln-sn`pwd`/cisco7decrypt.py~/bin/cisco7decrypt  ","date":"2016-10-12T10:00:03Z","permalink":"https://www.richardstrnad.ch/2016/10/12/python-building-a-cisco-type-7-decrypt-tool/","title":"Python ‚Äì Building a Cisco Type 7 Decrypt Tool"},{"content":"On the IOS XR it\u0026rsquo;s a bit different, but still pretty easy.\n1 2 3 4 5 6  RP/0/RSP0/CPU0:router01#conf t RP/0/RSP0/CPU0:router01(config)#commit replace This commit will replace or remove the entire running configuration. This operation can be service affecting. Do you wish to proceed? [no]: yes RP/0/RSP0/CPU0:ios(config)#   ","date":"2016-10-11T10:02:09Z","permalink":"https://www.richardstrnad.ch/2016/10/11/reset-cisco-ios-xr-device-factory-reset/","title":"Reset Cisco IOS XR Device (Factory Reset)"},{"content":"We moved an internal tool to docker (docker-compose), this includes the required MySQL Database.\nI looked for a easy solution todo a backup through mysqldump and found something great üôÇ\nThis is the relevant docker-compose part:\n1 2 3  mysql: networks: - back_net   If this docker-compose is running, the mysql container get the following name \u0026lsquo;ourtool_mysql_1\u0026rsquo;\nThe network gets the compose name added:\n1 2 3  docker network ls NETWORK ID NAME DRIVER SCOPE 4d42f74cfe7e ourtool_pub_net macvlan local   We want our backups in the host folder /mnt/Backups/ourtool/sql (This is a nfs mounted folder).\nNow we just put this information together:\n1 2 3 4 5  docker run -it \\ --net=ourtool_pub_net \\ -v /mnt/Backups/ourtool/sql:/var/backup \\ --rm mysql \\ sh -c \u0026amp;quot;exec mysqldump -h ourtool_mysql_1 -uroot -pYOURPASSWORD YOURDATABASE \u0026gt; /var/backup/mysql.dump\u0026amp;quot;   That\u0026rsquo;s it, it runs, after that the temporary container gets destroyed and you can find the data on the host itself ('/mnt/Backups/ourtool/sql' in my case)\nWe now just run this as a cronjob\n1 2 3 4 5 6 7 8 9  cat /etc/cron.daily/backup_ourtool #!/bin/sh FILENAME=\u0026amp;quot;ourtool-`date -I`.sql\u0026amp;quot; docker run -it \\ --net=ourtool_pub_net \\ -v /mnt/Backups/ourtool/sql:/var/backup \\ --rm mysql \\ sh -c \u0026amp;quot;exec mysqldump -h ourtool_mysql_1 -uroot -pYOURPASSWORD YOURDATABASE \u0026gt; /var/backup/$FILENAME\u0026amp;quot;   ","date":"2016-09-22T18:55:06Z","permalink":"https://www.richardstrnad.ch/2016/09/22/docker-mysql-backup/","title":"Docker MySQL Backup"},{"content":"Get the standalone software here\nFirst you have to copy the new nexus 9000 standalone firmware to the APIC:\n1 2  admin@apic1:~\u0026gt; scp richy@YOURIP:Downloads/nxos.7.0.3.I2.2a.bin . nxos.7.0.3.I2.2a.bin 100% 513MB 9.2MB/s 00:56   And now you can push it to the appropriate Nexus 9000. (The user/password matches the APIC)\n1 2 3  admin@apic1:~\u0026gt; scp nxos.7.0.3.I2.2a.bin admin@leaf02:bootflash Password: nxos.7.0.3.I2.2a.bin 100% 513MB 7.0MB/s 01:13   Now reboot the switch and break into the load prompt, this can be done with Control+C in Putty.\n1 2  loader \u0026gt; loader \u0026gt; boot nxos.7.0.3.I2.2a.bin   After the switch is booted up you got the default prompts (POAP, Secure Admin PW, etc..) When you finaliy reach the CLI you have to Set the Boot Path!\n1 2  switch(config)# boot nxos bootflash:///nxos.7.0.3.I2.2a.bin Performing image verification and compatibility check, please wait....   Also save the config!\n1 2 3  switch# copy running-config startup-config [########################################] 100% Copy complete.   Now is time to verify that everything is fine with the new image (should, as it already booted ;-))\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33  switch# show boot Current Boot Variables: sup-1 NXOS variable = bootflash:/nxos.7.0.3.I2.2a.bin \u0026lt;---- Good No module boot variable set Boot Variables on next reload: sup-1 NXOS variable = bootflash:/nxos.7.0.3.I2.2a.bin \u0026lt;---- Good No module boot variable set switch# show install all impact . . . Compatibility check is done: Module bootable Impact Install-type Reason ------ -------- -------------- ------------ ------ 1 yes non-disruptive none Images will be upgraded according to following table: Module Image Running-Version(pri:alt) New-Version Upg-Required ------ ---------- ---------------------------------------- -------------------- ------------ 1 nxos 7.0(3)I2(2a) 7.0(3)I2(2a) no 1 bios v07.41(10/12/2015):v07.17(09/10/2014) v07.34(08/11/2015) no   That\u0026rsquo;s it, make a final boot and your switch is now ACI-Free!\nMaybe there is the time you want to go back to ACI, check out my new post!\n","date":"2016-02-29T13:27:06Z","permalink":"https://www.richardstrnad.ch/2016/02/29/acin9k-how-to-convert-a-nexus-9000-from-aci-mode-to-standalone/","title":"ACI/N9K ‚Äì How to convert a Nexus 9000 from ACI Mode to NX-OS (Standalone)"},{"content":"Cisco continues its strategy to merge the whole Campus Switch platform to a single Image, the newest step in this process is IOS XE 16.1.1. Currently only available for the Cat3k Platform (3650, 3850) but releases for the other Catalyst platforms should follow.\nIn this post i show you how to upgrade your Cisco 3650/3850 Switch from 3.x to 16.1.1\nFrist, grab the software here:\nIOS XE Denali 16.1.1 on Cisco.com\nJust copy it to your switch\n1 2 3 4 5 6 7 8 9  Switch#copy ftp://x:x@10.32.31.15/cat3k_caa-universalk9.16.01.01.SPA.bin flash: Destination filename [cat3k_caa-universalk9.16.01.01.SPA.bin]? Accessing ftp://*****:*****@10.32.31.15/cat3k_caa-universalk9.16.01.01.SPA.bin...!!!!!!! *Dec 16 08:22:42.371: Loading cat3k_caa-universalk9.16.01.01.SPA.bin !!!!!!!!!!!!!... ... !!! [OK - 469677062/4096 bytes] 469677062 bytes copied in 432.250 secs (1086587 bytes/sec)   After that you can install the OS as always\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35  Switch#software install file flash:cat3k_caa-universalk9.16.01.01.SPA.bin new Preparing install operation ... [1]: Starting install operation [1]: Expanding bundle flash:cat3k_caa-universalk9.16.01.01.SPA.bin [1]: Copying package files [1]: Package files copied [1]: Finished expanding bundle flash:cat3k_caa-universalk9.16.01.01.SPA.bin [1]: Verifying and copying expanded package files to flash: [1]: Verified and copied expanded package files to flash: [1]: Starting compatibility checks [1]: Finished compatibility checks [1]: Starting application pre-installation processing [1]: Finished application pre-installation processing [1]: Old files list: Removed cat3k_caa-base.SPA.03.03.05SE.pkg Removed cat3k_caa-drivers.SPA.03.03.05SE.pkg Removed cat3k_caa-infra.SPA.03.03.05SE.pkg Removed cat3k_caa-iosd-universalk9.SPA.150-1.EZ5.pkg Removed cat3k_caa-platform.SPA.03.03.05SE.pkg Removed cat3k_caa-wcm.SPA.10.1.150.0.pkg [1]: New files list: Added cat3k_caa-rpbase.16.01.01E.SPA.pkg Added cat3k_caa-srdriver.16.01.01E.SPA.pkg Added cat3k_caa-wcm.16.01.01E.SPA.pkg Added cat3k_caa-webui.16.01.01E.SPA.pkg [1]: Creating pending provisioning file [1]: Finished installing software. New software will load on reboot. [1]: Committing provisioning file [1]: Do you want to proceed with reload? [yes/no]: yes System configuration has been modified. Save? [yes/no]: yes Building configuration... Compressed configuration from 2991 bytes to 1553 bytes[OK] [1]: Reloading   It takes some time to boot up again, after that you can see the new Version is running\n1 2 3  Switch Ports Model SW Version SW Image Mode ------ ----- ----- ---------- ---------- ---- * 1 32 WS-C3850-24P Denali 16.1.1 CAT3K_CAA-UNIVERSALK9 INSTALL   After that i created a user with priv 15\n1  Switch(config)#username cisco privilege 15 secret cisco   Now you can head to the new WebGui, i attached two impressions of the new GUI. Compared to the old cisco switch GUIs it looks really nice. But if it ever is used?‚Ä¶ üôÇ\n\n\n","date":"2015-12-21T17:00:17Z","permalink":"https://www.richardstrnad.ch/2015/12/21/cisco-ios-xe-install-the-new-release-16-1-1-denali-on-3850/","title":"Cisco IOS XE ‚Äì Install the New release 16.1.1 (Denali) on 3850"},{"content":"If you want to reset one or all of your APIC Controllers to factory default, there is a easy command for that \u0026lsquo;eraseconfig setup\u0026rsquo;\n1 2 3 4 5 6 7  ‚Üí ssh admin@10.127.129.50 Application Policy Infrastructure Controller admin@10.127.129.50\u0026#39;s password: apic1# bash ---\u0026gt; Only required with Version 1.2+ admin@apic1:~\u0026gt; eraseconfig setup Do you want to cleanup the initial setup data? The system will be REBOOTED. (Y/n):   When your intention is to reset a whole fabric, it\u0026rsquo;s recommended to reset the switches first:\nReset a ACI Spine/Leaf Switch\nIf you reset the APIC Controller first, you have to do this step through console afterwards.\n","date":"2015-12-19T17:00:38Z","permalink":"https://www.richardstrnad.ch/2015/12/19/cisco-aci-reset-a-apic/","title":"Cisco ACI ‚Äì Reset a APIC"},{"content":"Cisco introduced a NX-OS like CLI for the Cisco ACI Solution with release 1.2(1i).\nIn this post i will demonstrate some of the things that can be achieved through the NX-OS CLI.\n!Important!\nThere is no safety net, if you issue something like \u0026lsquo;no tenant XXX\u0026rsquo; the configuration is gone!\nNo commit, warning or similar!\n!Important!\nBasics The NX-OS like CLI is the new default if you connect via SSH to the APIC\n1 2 3 4  ‚Üí ssh admin@10.127.129.50 Application Policy Infrastructure Controller admin@10.127.129.50\u0026#39;s password: apic1#   If you wan to access the Linux CLI you can go there through \u0026lsquo;bash\u0026rsquo; and go back with \u0026lsquo;exit\u0026rsquo;\n1 2 3 4 5 6 7 8  apic1# bash admin@apic1: ... admin@apic1: exit apic1#   Configurations Tenant Configure a Tenant, Application Profile and End Point Group\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21  apic1# configure apic1(config)# tenant nxos_cli apic1(config-tenant)# application app_1 apic1(config-tenant-app)# epg epg_1 apic1(config-tenant-app-epg)# exit apic1(config-tenant-app)# epg epg_2 apic1(config-tenant-app-epg)# end ... apic1# show running-config tenant nxos_cli # Command: show running-config tenant nxos_cli # Time: Sun Dec 13 16:44:58 2015 tenant nxos_cli application app_1 epg epg_1 exit epg epg_2 exit exit exit   I\u0026rsquo;m sure that this configuration style is straight forward for all network engineers, and for some tasks i think this is a great way to get things done!\nNetworking Example of adding a new Subnet to a VRF.\n1 2 3 4 5 6 7 8  apic1(config)# tenant nxos_cli apic1(config-tenant)# vrf context vrf_1 apic1(config-tenant-vrf)# exit apic1(config-tenant)# bridge-domain bd_1 apic1(config-tenant-bd)# vrf member vrf_1 apic1(config-tenant-bd)# exit apic1(config-tenant)# interface bridge-domain bd_1 apic1(config-tenant-interface)# ip address 172.20.20.1/24   Complete Tenant example This is how one of my tenants look in the CLI\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87  tenant PoC vrf context Net_1 contract enforce egress exit application SimpleWebServer epg sqlServers bridge-domain member BD_1 contract provider mgmt_contract contract provider SQL_Contract vmware-domain member vmware_dom deploy immediate exit epg webServers bridge-domain member BD_1 contract consumer SQL_Contract contract provider Web_Contract contract provider mgmt_contract vmware-domain member vmware_dom deploy immediate exit exit contract Allow_ANY subject Allow_ANY_Subj access-group IP_ANY both exit exit contract SQL_Contract subject SQL_Subject access-group SQL_Filter both exit exit contract Ubuntu_to_Ext subject external_con access-group IP_ANY in access-group IP_ANY out exit exit contract Web_Contract subject Web_Subject access-group Web_Filter both exit exit contract mgmt_contract subject allow_icmp access-group icmp both exit subject allow_ssh access-group filter_telnet both access-group ssh both exit exit external-l3 epg L3_Out:ext_all vrf member Net_1 match ip 0.0.0.0/0 contract consumer mgmt_contract contract consumer Web_Contract contract provider Ubuntu_to_Ext exit access-list DNS match udp dest 53 exit access-list IP_ANY match raw ANY_TCP etherT ip prot 6 stateful yes match udp exit access-list SQL_Filter match tcp dest 3306 exit access-list Web_Filter match tcp dest 80 exit access-list filter_telnet match tcp dest 23 exit access-list icmp match icmp exit access-list ssh match raw ssh dFromPort 22 dToPort 22 etherT ip prot 6 stateful yes exit bridge-domain BD_1 arp flooding l2-unknown-unicast flood vrf member Net_1 exit interface bridge-domain BD_1 ip address 10.127.200.1/24 secondary scope public exit exit   ","date":"2015-12-16T14:00:46Z","permalink":"https://www.richardstrnad.ch/2015/12/16/cisco-aci-nx-os-style-cli/","title":"Cisco ACI ‚Äì NX-OS Style CLI"},{"content":"Cisco released the newest ACI Software this Week, called 1.2(1i).\nThere are a lot of great new features that i will try to cover in more detail in the future, for now the overview from the release notes.\nTo install this new software, you can follow one of my blog posts:\nThrough GUI¬†or¬†Through CLI\n   Feature Description Guidelines and Restrictions     Basic GUI and Advanced GUI for the APIC The APIC GUI now has two operating modes: the Basic GUI and Advanced GUI.The Basic GUI is simplified compared to the Advanced GUI, which provides for easier and faster configuration of ACI constructs. The Basic GUI has intelligence embedded that enables the APIC to create some of the ACI model constructs automatically for you, and the Basic GUI provides validations to ensure consistency in the configuration. This functionality reduces and prevents faults.The Advanced GUI is equivalent to the GUI of the previous releases. You should use the Advanced GUI to manage any policy that you created prior to release 1.2.For more information, see the Cisco APIC Getting Started Guide. The performance for some Layer 3 configurations using the Basic GUI can be slow.   NX-OS-Style CLI for APIC The APIC CLI is now similar to the NX-OS CLI. The NX-OS CLI has intelligence embedded that enables the APIC to create some of the ACI model constructs automatically for you, and the CLI provides validations to ensure consistency in the configuration. This functionality reduces and prevents faults.For more information, see the Cisco APIC Getting Started Guide and Cisco APIC NX-OS Style Command-Line Interface Configuration Guide. The performance for some CLI commands can be slow in a scale setup. For more information, see Verified Scalability Limits.   Common Pervasive Gateway This feature enables you to configure multiple ACI fabrics with an IPv4 common gateway on a per bridge domain basis. Doing so enables moving one or more virtual machine (VM) or conventional hosts across the fabrics while the host retains its IP address. VM host moves across fabrics can be done automatically by the VM hypervisor. The ACI fabrics can be co-located, or provisioned across multiple sites. The Layer 2 connection between the ACI fabrics can be a local link, or can be across a routed WAN link. None   Common Tenant In the troubleshooting wizard, you can now configure a session with a bridge domain and context in the ‚ÄúCommon‚Äù tenant. None   Class of Service Preservation The ACI fabric enables preserving 802.1p class of service (CoS) within the fabric. Enable the fabric global QoS policy dot1p-preserve option to guarantee that the 802.1p value in packets which enter and transit the ACI fabric is preserved. None   Direct Server Return The direct server return feature enables a server to respond directly to clients without having to go through the load balancer, which eliminates a bottleneck in the server-to-client path.For more information, see the Cisco APIC Layer 4 to Layer 7 Services Deployment Guide. None   Ingress Policy Enforcement for Layer 3 Out Scale Starting with release 1.2(1), ingress-based policy enforcement enables defining policy enforcement for Layer 3 Out traffic with regard to egress and ingress directions. The default is ingress. During an upgrade to release 1.2(1) or higher, existing Layer 3 Out configurations are set to egress so that the behavior is consistent with the existing configuration; no special upgrade sequence needs to be planned. After the upgrade, an administrator changes the global property value to ingress. Once changed, the system reprograms the rules and prefix entries. Rules are removed from the egress leaf and installed on the ingress leaf, if not already present. If not already configured, an Actrl prefix entry is installed on the ingress leaf. Direct server return (DSR), and attribute-based EPGs require ingress-based policy enforcement. vzAny and taboo ignore ingress-based policy enforcement. Transit rules are applied at ingress.In Ingress Policy enforcement mode, if a contract is defined between an L3InstP and an endpoint group, all of the prefixes of the L3InstP are installed in a non-border leaf where that endpoint group is present. None   Local Policy Enforcement This feature enforces a physical leaf‚Äôs policy on traffic that is across the fabric. None   Maximum Prefix Limit Tenant networking protocol policies for BGP l3extOut connections can be configured with a maximum prefix limit that enables monitoring and restricting the number of route prefixes received from a peer. Once the max prefix limit is exceeded, a log entry can be recorded, further prefixes can be rejected, the connection can be restarted if the count drops below the threshold in a fixed interval, or the connection is shut down. Only one option can be used at a time. The default setting is a limit of 20,000 prefixes, after which new prefixes are rejected. When the reject option is deployed, BGP accepts one more prefix beyond the configured limit and the APIC raises a fault. None   Microsegmentation for Microsoft Virtualization This feature supports virtual machine attribute-based endpoint groups for virtual endpoints that are attached to a VMM domain that has Microsoft SCVMM associated with it.This feature is dependent the Microsoft System Center UR9 release and the appropriate APIC agent.For more information, see the Cisco ACI Virtualization Guide. None   Microsegmentation with IP-based Endpoint Groups This feature supports IP-based endpoint groups for physical or virtual endpoints as they are admitted into the fabric. This policy is applied at the physical node level.For more information, see the Cisco ACI Virtualization Guide. You must use any of the following hardware to use this feature:¬∑ Nexus 9372PX-E¬∑ Nexus 9372TX-E¬∑ N9K-M6PQ-E   Role-Based Access Control Rule Enhancements Layer 4 to Layer 7 policy configurations in a multi-tenant environment required administrator intervention to create certain objects that cannot be created by tenant administrators using the classic role-based access control (RBAC) domains and roles model definition. An Application Policy Infrastructure Controller (APIC) provides more granular RBAC privileges in the management information tree (MIT) such that you can grant tenant administrators the privileges that are required to create the objects. Tenant administrators can also create RBAC rules through self-service without administrator intervention to grant permissions for resources under their tenant subtree to other tenants and users in the system.For more information, see the Cisco APIC Layer 4 to Layer 7 Services Deployment Guide. None   Shared Layer 3 Out A shared Layer 3 Out configuration provides routed connectivity to external networks as a shared service. An l3extInstP endpoint group (EPG) provides routed connectivity to external networks. It can be can be provisioned as a shared service in any tenant (user, common, infra, or mgmt.). Prior to release 1.2(1x), this configuration was only supported in the user and common tenants. An EPG in any tenant can use a shared services contract to connect with an l3extInstP EPG regardless of where in the fabric that l3extInstP EPG is provisioned. This simplifies the provisioning of routed connectivity to external networks; multiple tenants can share a single l3extInstP EPG for routed connectivity to external networks. Sharing an l3extInstP EPG is more efficient because it consumes only one session on the switch regardless of how many EPGs use the single shared l3extInstP EPG. None   Simple Network Management Protocol support for APIC The Simple Network Management Protocol (SNMP) is now supported for APIC. None   Fabric Secure Mode Fabric secure mode enhances physical fabric security by enforcing checks for leafs, spines, and APICs that join the fabric by requiring manual approval before they can join the fabric. None   Static Route with Weights The ACI fabric static route preference feature keeps static route preferences intact across leaf switches so that route selection happens based on this preference. None   Unmanaged Mode The unmanaged mode for services enables you to choose the APIC\u0026rsquo;s behavior for allocating network resources and programming the fabric. When enabled, the unmanaged mode restricts the APIC to allocate only the network resources for a service appliance and to program only the fabric (leaf). The configuration of the device is left to be done externally by you.For more information, see the Cisco APIC Layer 4 to Layer 7 Services Deployment Guide. None   vRealize Integration You can integrate ACI with VMWare\u0026rsquo;s vRealize Orchestration (vRO), vRealize Automation (vRA), and vCenter.For more information, see the Cisco ACI Virtualization Guide. None   vSphere vMotion support across two vSphere Distributed Switches (vDSs)vSphere vMotion support across two vCenters vSphere vMotion capabilities have been enhanced in this release, enabling users to perform live migration of virtual machines across virtual switches, and vCenter Server systems.For more information, see the VMware vSphere 6.0 Release Notes. None    Source:\nRelease Notes\nLink to the Software:\nCisco Download Page\n","date":"2015-12-13T14:48:47Z","permalink":"https://www.richardstrnad.ch/2015/12/13/cisco-aci-new-features-in-release-1-21i/","title":"Cisco ACI ‚Äì New Features in Release 1.2(1i)"},{"content":"Today i learnt that the Production Year and Week is \u0026lsquo;hidden\u0026rsquo; in the Cisco Serials üôÇ\nThe format of the serial is always like \u0026lsquo;xxxYYWWxxxx\u0026rsquo;, \u0026lsquo;YY\u0026rsquo; is Code for the Year, but not the Year itself! \u0026lsquo;WW\u0026rsquo; is the week of manufacture.\n   Code Year     01 1997   02 1998   03 1999   04 2000   05 2001   06 2002   07 2003   08 2004   09 2005   10 2006   11 2007   12 2008   13 2009   14 2010   15 2011   16 2012   17 2013   18 2014   19 2015   20 2016       Code Week     1-5 January   6-9 February   10-14 March   15-18 April   19-22 May   23-27 June   28-31 July   32-35 August   36-40 September   41-44 October   45-48 November   49-52 December    ","date":"2015-11-26T06:14:13Z","permalink":"https://www.richardstrnad.ch/2015/11/26/recognise-the-production-date-of-your-cisco-equipment-based-on-the-serial/","title":"Recognise the Production Date of your Cisco Equipment based on the Serial"},{"content":"Login via SSH or Console to the switch\nMake sure that there is an image on the leaf/spine\n1 2  leaf01# dir /bootflash/aci-n9000* /bootflash/aci-n9000-dk9.11.0.2j.bin   Make sure that this image is used as bootvar\n1 2 3 4  leaf01# cat /mnt/cfg/0/boot/grub/menu.lst.local boot aci-n9000-dk9.11.0.2j.bin leaf01# cat /mnt/cfg/1/boot/grub/menu.lst.local boot aci-n9000-dk9.11.0.2j.bin   If this Image is not set as bootvar, there is a script for that üôÇ\n1  leaf01# setup-bootvars.sh aci-n9000-dk9.11.0.2j.bin   After the check you can reset the switch\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  leaf01# setup-clean-config.sh aci-n9000-dk9.11.0.2j.bin In progress In progress In progress In progress In progress In progress In progress In progress In progress In progress In progress In progress In progress In progress In progress Done   Just reload the switch\n1 2  leaf01# reload This command will reload the chassis, Proceed (y/n)? [n]: y   After this process you can rejoin this Switch to the fabric\n¬†","date":"2015-10-23T15:52:19Z","permalink":"https://www.richardstrnad.ch/2015/10/23/reset-a-aci-spineleaf-switch-to-default/","title":"Cisco ACI ‚Äì Reset a ACI Spine/Leaf Switch to default"},{"content":"Cisco just released the newest Cisco ACI Software called 1.1(2h).\n   Feature Description Guidelines and Restrictions     AES encryption for configuration files As of release 1.1(2), the secure properties of APIC configuration files can be encrypted by enabling AES-256 encryption. AES encryption is a global configuration option; all secure properties conform to the AES configuration setting. It is not possible to export just a portion of the ACI fabric such as a tenant configuration with AES encryption.   SCVMM clustering support You can now install the APIC SCVMM agent on a Highly Available System Center Virtual Machine Manager (SCVMM). None.   Windows Azure Pack with L3out support Windows Azure Pack tenants can now configure their networks to connect outside of the fabric. This is done by establishing a security contract to L3ExtOut for both incoming and outgoing traffic.See the Cisco ACI Virtualization Guide for more information. None.   ACI Optimizer After entering your network requirements in an Optimizer Config Template, the ACI Optimizer tells you how many leafs you will need for your network and suggests how to deploy each application and external EPG on each leaf without violating any constraints. Also, after entering your existing topology in an Optimizer Config Template, the ACI Optimizer helps you determine if you have what you need, if you are exceeding any limitations, and suggests how to deploy each application and external EPG on each leaf. When using the ACI Optimizer, Scale constraints may be violated if the given topology is not enough.   VMware vSphere 6.0 support ACI now supports VMware vCenter 6.0.¬†See the Cisco ACI Virtualization Guide for more information. The vCenter 6.0 feature of vMotion across a vCenter/datacenter is not supported.    Definitly notable is the VMware vSphere 6.0 support!\nSource:\nhttp://www.cisco.com/c/en/us/td/docs/switches/datacenter/aci/apic/sw/1-x/release/notes/apic_rn_112h.html\nLink to the Software:\nhttps://software.cisco.com/download/release.html?mdfid=285968390\u0026softwareid=286278832\u0026release=1.1(2h)\u0026relind=null\u0026rellifecycle=null\u0026reltype=null\u0026i=rn\n","date":"2015-08-19T12:20:14Z","permalink":"https://www.richardstrnad.ch/2015/08/19/cisco-aci-new-features-in-release-1-12h/","title":"Cisco ACI ‚Äì New Features in Release 1.1(2h)"},{"content":"Some time ago i posted how to do a upgrade of your ACI Fabric through CLI.\nCisco made this process now way easier, with some cool new features.\nIn this short guide i used the current ACI release 1.1(1o), that you can grab directly from cisco here.\nUpload the Firmware to the APIC You can now upload directly through your browser, no longer the need for a SCP/FTP Server!\n\nJust select the file from you computer, that\u0026rsquo;s it!\n\nUpload both files, the Controller¬†and Switch Firmware:\nController -¬†aci-apic-dk9.1.1.1o.iso\nSwitches -¬†aci-n9000-dk9.11.1.1o.bin\nUpgrade of the APIC Controllers You can now start with the upgrade of your APIC Controllers.\n\nSelect the new version here and \u0026lsquo;Apply now\u0026rsquo; the Update will start immediately.\nUpgrade of the Nexus 9000 Spine and Leaf switches After the upgrade of the controllers is finished, you can start with the switches.\nIn production you got properly more than one Firmware Group or you split them in another way (Maintenance Windows A/B), but i kept it simple in my lab and made just two (Leaf/Spine).\n\n\nYou can just trigger the upgrade one and now with the \u0026lsquo;Upgrade Now\u0026rsquo; option!\nSame apply for my other group.\n\nThat\u0026rsquo;s it! You just upgraded your ACI Fabric with success and this time easier and faster! ","date":"2015-08-09T18:45:37Z","permalink":"https://www.richardstrnad.ch/2015/08/09/cisco-aci-the-new-and-nice-gui-way-to-upgrade-your-aci-fabric/","title":"Cisco ACI ‚Äì The new and nice GUI way to Upgrade your ACI Fabric"},{"content":"First grab the release from the cisco page here\nThen put it through scp from you Download place to the ESX Server\n1 2 3  scp CiscoAVS_1.5-5.2.1.SV3.1.5-pkg.zip root@10.32.5.150:/tmp Password: CiscoAVS_1.5-5.2.1.SV3.1.5-pkg.zip 100% 35MB 806.2KB/s 00:45   Next you Login to the ESX through SSH and check the current version\n1 2 3 4  ~ # vemcmd show version VEM Version: 5.2.1.3.1.3.0-3.2.1 System Version: VMware ESXi 5.5.0 Releasebuild-2068190 ESX Version Update Level: 0   Then i unzipped the archives and upgraded the vib\n1 2 3 4 5  cd /tmp/ unzip CiscoAVS_1.5-5.2.1.SV3.1.5-pkg.zip unzip CiscoAVS_1.5-5.2.1.SV3.1.5.zip cd ~ esxcli software vib update -v /tmp/CiscoAVS_1.5-5.2.1.SV3.1.5/cross_cisco-vem-v197-5.2.1.3.1.5.0-3.2.1.vib --maintenance-mode   And thats it, i\u0026rsquo;m now running the new AVS Version\n1 2 3 4 5  ~ # vemcmd show version VEM Version: 5.2.1.3.1.5.0-3.2.1 OpFlex SDK Version: 1.1(1j) System Version: VMware ESXi 5.5.0 Releasebuild-2068190 ESX Version Update Level: 2   ","date":"2015-06-17T08:54:21Z","permalink":"https://www.richardstrnad.ch/2015/06/17/avs-upgrade-through-cli/","title":"Cisco ACI ‚Äì AVS Upgrade through CLI"},{"content":"I\u0026rsquo;m a pretty big fan of Sublime Text (v3), will blog more about my setup details. But this morning i really missed the Control+W to delete the first word on the left side, so i found this Solution:\nSublime Text -\u0026gt; Preferences -\u0026gt; Key Bindings - User:\n1 2 3  [ { \u0026#34;keys\u0026#34;: [\u0026#34;ctrl+w\u0026#34;], \u0026#34;command\u0026#34;: \u0026#34;delete_word\u0026#34;, \u0026#34;args\u0026#34;: {\u0026#34;forward\u0026#34;: false, \u0026#34;sub_words\u0026#34;: true}}, ]   An that\u0026rsquo;s it, you can now delete words with Control+W üôÇ\n","date":"2015-05-17T07:35:53Z","permalink":"https://www.richardstrnad.ch/2015/05/17/sublime-use-controlw-to-delete-word-to-the-left/","title":"Sublime ‚Äì Use Control+W to delete Word to the left"},{"content":"Today a colleague of mine (Thanks Alex Passfall) showed me a simple ftp server under mac:\n1 2  pip install twisted # if not already sudo twistd -n ftp -p 21 -r Downloads   After that you can access all the files in the specified directory through ftp. Awesome stuff!\n1 2 3 4 5 6 7 8  aci-lab-as01#copy ftp://10.32.32.184/file.lic . Destination filename [file.lic]? Accessing ftp://10.32.32.184/file.lic... Loading file.lic ! [OK - 814/4096 bytes] 814 bytes copied in 0.084 secs (9690 bytes/sec)   Thanks @Samuel Heinrich for spell checking üòâ\n","date":"2015-05-06T07:10:01Z","permalink":"https://www.richardstrnad.ch/2015/05/06/ftp-server-under-mac-os-x/","title":"FTP Server under Mac OS X"},{"content":"Overview I did the Upgrade from Prime Infrastructure 2.1 to Prime Infrastructure 2.2 last week for one of our customers. Unfortunately this upgrade isn\u0026rsquo;t possible \u0026lsquo;in place\u0026rsquo;, you have to install a new Prime Infrastructure 2.2 Server and then import your old configuration.\nAs described in the Prime Infrastructure 2.2 Quickstart Guide¬†you have to be on one of the following versions that the backup can be used in 2.2:\nCisco Prime Infrastructure 2.1.2 (with the UBF patch)\r\rCisco Prime Infrastructure 2.1.1 (with the UBF patch)\r\rCisco Prime Infrastructure 2.1.0.0.87\r\rCisco Prime Infrastructure 1.4.2\r\rCisco Prime Infrastructure 1.4.1\r\rCisco Prime Infrastructure 1.4.0.45\r\rLuckily we were on 2.1.0.0.87, so it wasn\u0026rsquo;t necessary to do a minor upgrade first.\nInstall a Prime Infrastructure 2.2 Server First you need a new Server, for me this was again a VM (like the 2.1 installation)\nYou can download the Image here, just pick the right one for your case. For me it was:\nCisco Prime Infrastructure 2.2 Virtual Appliance\nPI-VA-2.2.0.0.158.ova\nIf you also use the VM, check the different Virtual Appliance options out in this table:\n\nThis should help you to pick the right VM.\nNow you can just install the image through the vsphere console and finish the basic setup. I used a different IP first and changed it before i did the restore.\nBackup of your Prime Infrastructure 2.1 After you ensured that you have one of the compatible versions, you start with the backup.\nThe easiest way is to use a remote repository, just configure one from the CLI like these\n1 2 3  repository ftp url ftp://your.ftp.server/path/ user username¬†password plain¬†plain   You\u0026rsquo;re now ready to perform the backup, this took some time for me.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  sv00019/admin# backup PI_Backup repository ftp application NCS % Creating backup with timestamped filename: PI_Backup-150430-1120.tar.gpg Backup Started at : 04/30/15 11:20:29 Stage 1 of 7: Database backup ... Database size: 81G -- completed at 04/30/15 11:37:09 Stage 2 of 7: Database copy ... -- completed at 04/30/15 11:37:09 Stage 3 of 7: Backing up support files ... -- completed at 04/30/15 11:37:17 Stage 4 of 7: Compressing Backup ... -- completed at 04/30/15 11:37:29 Stage 5 of 7: Building backup file ... -- completed at 04/30/15 11:47:04 Stage 6 of 7: Encrypting backup file ... -- completed at 04/30/15 11:50:01 Stage 7 of 7: Transferring backup file ... -- completed at 04/30/15 11:51:32 Total Backup duration is: 0h:31m:3s   After that, you are ready to restore the Backup.\nRestore the Backup of your Prime Infrastructure 2.1 We assume here that your new Prime Infrastructure 2.2 Server is ready. First step would be to shut down the 2.1 Server and configure this IP on the 2.2 Server.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27  sv00283/admin# application stop NCS Stopping Prime Infrastructure... This may take a few minutes... Prime Infrastructure successfully shutdown. Plug and Play Gateway is being shut down..... Please wait!!! Stop of Plug and Play Gateway Completed!! Stopping SAM daemon... Checking for SAM daemon again ... SAM Daemon not found... Stopping DA daemon ... Checking for DA daemon again ... DA Daemon not found... Stopping strongSwan IPsec... sv00283/admin(config)# interface GigabitEthernet 0 sv00283/admin(config-GigabitEthernet)# ip address 10.192.2.30 255.255.255.0 Changing the hostname or IP may result in undesired side effects, such as installed application(s) being restarted. Are you sure you want to proceed? [y/n] y   I stopped the application first, just prevent any possible issues.\nThen i added the same remote repository as i used for the backup\n1 2 3  repository ftp url ftp://your.ftp.server/path/ user username¬†password plain¬†plain   After this step, you are ready for the restore. Plan some time for this to finish!\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55  sv00283/admin# restore PI_Backup-150430-1120.tar.gpg repository nas001 application NCS * NOTE * If the system console is disconnected or got cleared on session timeout run \u0026#39;show restore log\u0026#39; to see the output of the last restore session. Restore will restart the application services. Continue? (yes/no) [yes] ? DO NOT press ^C while the restoration is in progress Aborting restore with a ^C may leave the system in a unrecoverable state Initiating restore. Please wait... Restore Started at 04/30/15 14:10:47 Stage 1 of 9: Transferring backup file ... -- completed at 04/30/15 14:11:58 Stage 2 of 9: Decrypting backup file ... -- completed at 04/30/15 14:16:04 Stage 3 of 9: Unpacking backup file ... -- completed at 04/30/15 14:16:05 Stopping strongSwan IPsec failed: starter is not running Stage 4 of 9: Decompressing backup ... -- completed at 04/30/15 14:17:10 Stage 5 of 9: Restoring Support Files ... -- completed at 04/30/15 14:17:12 Stage 6 of 9: Restoring Database Files ... -- completed at 04/30/15 14:17:45 Stage 7 of 9: Recovering Database ... -- completed at 04/30/15 15:13:01 Stage 8 of 9: Updating Database Schema ... Stage 1 of 5: Pre Migration Schema Upgrade ... -- completed at: 2015-04-30 15:38:25.126, Time Taken : 0 hr, 19 min, 10 sec Stage 2 of 5: Schema Upgrade ... : This could take long time based on the existing data size. -- completed at: 2015-04-30 15:41:42.862, Time Taken : 0 hr, 3 min, 17 sec Stage 3 of 5: Post Migration Schema Upgrade ... -- completed at: 2015-04-30 16:04:13.639, Time Taken : 0 hr, 22 min, 30 sec Stage 4 of 5: Enabling DB Constraints ... -- completed at: 2015-04-30 16:04:34.163, Time Taken : 0 hr, 0 min, 12 sec Stage 5 of 5: Finishing Up ... -- completed at: 2015-04-30 16:04:41.941, Time Taken : 0 hr, 0 min, 7 sec -- completed at 04/30/15 16:06:03 Stage 9 of 9: Re-enabling Database Settings ... -- completed at 04/30/15 16:06:03 Total Restore duration is: 01h:55m:16s INFO: Restore completed successfully. Starting PI Server... This may take some time Starting Prime Infrastructure... This may take a while (10 minutes or more) ... Prime Infrastructure started successfully. Starting strongSwan 5.0.1 IPsec [starter]...   And that\u0026rsquo;s it, you are running now Prime Infrastructure 2.2 \n¬†","date":"2015-05-05T21:15:08Z","permalink":"https://www.richardstrnad.ch/2015/05/05/cisco-prime-infrastructure-update-from-2-1-to-2-2/","title":"Cisco Prime Infrastructure ‚Äì Update from 2.1 to 2.2"},{"content":"Just for documentation reason, and for everyone out there that is looking for this information üôÇ\nDefault ACS User/Password for the GUI.\n1 2  Username: ACSAdmin Password: default   After that, you get promoted for a new password.\n","date":"2015-03-16T15:34:32Z","permalink":"https://www.richardstrnad.ch/2015/03/16/cisco-acs-default-user-and-password-for-the-gui/","title":"Cisco ACS ‚Äì Default User and Password for the GUI"},{"content":"I had a hard time to find the correct OID and ended with doing a snmpwalk and try to find the right OID with a grep‚Ä¶\nBut i think i made it üôÇ\nCrosschecked on 2 5760 Clusters and i got the correct count on both, also tried to reboot some APs and the count seems correct to me.\nNote: I use 3.6.1 so maybe you get a different result with another software version.\n1  1.3.6.1.4.1.9.9.999999.1.1.1.11.0   Interesting is that i found two other OIDs that report the same value.\n1 2  1.3.6.1.4.1.9.9.999999.1.1.1.17.0 1.3.6.1.4.1.9.9.999999.1.1.1.18.0   ","date":"2015-03-05T14:21:57Z","permalink":"https://www.richardstrnad.ch/2015/03/05/cisco-wlc-ios-based-wlc-ap-count-through-snmp-5760-3850-3650/","title":"Cisco WLC ‚Äì IOS Based WLC AP Count through SNMP (5760, 3850, 3650)"},{"content":"I\u0026rsquo;m sure that it\u0026rsquo;s not the first time i felt for this ‚Ä¶\nTried to install a ACS Patch this morning and got an error:\n\u0026ldquo;% Manifest file not found in the bundle\u0026rdquo;\nFirst i used the wrong command:\npatch install 5-4-0-46-5.tar.gpg FTP\n1 2 3 4 5 6  ACS01/admin# patch install 5-4-0-46-5.tar.gpg FTP Save the current ADE-OS running configuration? (yes/no) [yes] ? Generating configuration... Saved the ADE-OS running configuration to startup successfully Initiating Application Patch installation... % Manifest file not found in the bundle   Easy solution, use the right command! üôÇ\nacs patch install 5-4-0-46-5.tar.gpg repository FTP\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34  ACS01/admin# acs patch install 5-4-0-46-5.tar.gpg repository FTP Installing ACS patch requires a restart of ACS services. Continue? (yes/no) yes Calculating disk size for /opt/CSCOacs/patches Total size of patch files are 1079 M. Max Size defined for patch files are 1000 M. WARNING: Patch of size 1079 M exceeds the allowed quota of 1000 M. This will not prohibit patch installation process as long as there is enough disk space. Please note that this indicates you should consider moving ACS to a higher disk space machine Stopping ACS. Stopping Management and View............................................................... Stopping Runtime......................... Stopping Database..... Stopping Ntpd.... Cleanup.. Stopping log forwarding ..... Installing patch version \u0026#39;5.4.0.46.5\u0026#39; Installing ADE-OS 1.2 patch. Please wait... Decompressing patch files 5.4.0.46.5 ... About to install files Removing old war Removing old war Removing old war Removing old war Removing old war Removing old war Removing old war Removing old war Removing old war /opt/CSCOacs/patches/5-4-0-46-5 Patch \u0026#39;5-4-0-46-5\u0026#39; version \u0026#39;5.4.0.46.5\u0026#39; successfully installed Starting ACS .... To verify that ACS processes are running, use the \u0026#39;show application status acs\u0026#39; command.   ","date":"2015-03-01T11:29:29Z","permalink":"https://www.richardstrnad.ch/2015/03/01/cisco-acs-patch-install-error-manifest-file-not-found-in-the-bundle/","title":"Cisco ACS ‚Äì Patch Install error (% Manifest file not found in the bundle)"},{"content":"I did a upgrade of our ACI Lab Fabric last week and documented all the steps. The upgrade is really straightforward, but hopefully this guide still helps you üôÇ\nFirst you have to catch the desired Software, get them directly from cisco. You need APIC Release image for 1.0(3f) release (aci-apic-dk9.1.0.3f.iso) and the Cisco Nexus 9000 Series ACI Mode Switch Software Release 11.0(3f) (aci-n9000-dk9.11.0.3f.bin). Get them here:\nCisco ACI Version 1.0(3f)\nI always check the MD5 sum, just to be sure that everything went right with my download.\n1 2  $ md5 aci-apic-dk9.1.0.3f.iso MD5 (aci-apic-dk9.1.0.3f.iso) = 6e747378ec4225ead0f27cb23aa54f02    Cisco ACI 1.0(3f) MD5 Hash  The MD5 hash looks right. Check the same for the Nexus 9000 Image!\nUpgrade of the APIC Controllers We start with the upgrade of the APIC Controller, all APIC Controllers of your Fabric have to be upgraded first.\nI did the whole upgrade through CLI, it\u0026rsquo;s also possible with the GUI but i prefer the CLI way.\n Copy the Software to the APIC Controller  1 2 3  admin@aci-lab-apic01:~\u0026gt; scp richy@10.32.32.179:Downloads/aci-apic-dk9.1.0.3f.iso . Password: aci-apic-dk9.1.0.3f.iso 100% 3175MB 102.4MB/s 00:31   Hint: Maybe you need an additional \u0026lsquo;/\u0026rsquo; after the \u0026lsquo;:\u0026rsquo; like \u0026lsquo;user@host:/path\u0026rsquo;\nThanks @Jonas Walker for the information!\n Add the new firmware to the repository  1 2  admin@aci-lab-apic01:~\u0026gt; firmware add aci-apic-dk9.1.0.3f.iso Firmware Image aci-apic-dk9.1.0.3f.iso is added to the repository    After adding the new firmware, it\u0026rsquo;s \u0026ldquo;removed\u0026rdquo; from the upload directory  1 2  admin@aci-lab-apic01:~\u0026gt; ls aci debug mit    Wait a couple of seconds and you can now see the new added firmware in the repository  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21  admin@aci-lab-apic01:~\u0026gt; firmware list Name : aci-apic-dk9.1.0.3f.bin Type : controller Version : 1.0(3f) Size(Bytes) : 3329372160 Release-Date : 2015-02-10T03:46:53.000+02:00 Download-Date : 2015-02-18T16:37:29.580+02:00 Name : aci-catalog-dk9.1.0.3f.bin Type : catalog Version : 1.0(3f) Size(Bytes) : 18064 Release-Date : 2015-02-10T02:27:12.000+02:00 Download-Date : 2015-02-18T16:37:31.554+02:00 Name : aci-catalog-dk9.1.0.2j.bin Type : catalog Version : 1.0(2j) Size(Bytes) : 17493 Release-Date : 2014-11-11T18:58:18.000+02:00 Download-Date : 2015-01-31T05:57:47.354+02:00    Now you can start the controller upgrade, it\u0026rsquo;s automatically done on all APIC Controllers, one at a time  1 2 3 4  admin@aci-lab-apic01:~\u0026gt; firmware upgrade controllers aci-apic-dk9.1.0.3f.bin Firmware Upgrade on Controllers has been scheduled. The upgrade will be performed on one controller at a time in the background. To check the upgrade status, use \u0026#39;firmware upgrade status node \u0026lt;node-id\u0026gt;\u0026#39;    Then you can check the status of the upgrade  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  admin@aci-lab-apic01:~\u0026gt; firmware upgrade status Node-Id Role Current-Firmware Target-Firmware Upgrade-Status Progress-Percent(if inprogress) ---------------------------------------------------------------------------------------------------------------------- \u0026lt;strong\u0026gt;1 controller 1.0(2j) apic-1.0(3f) inqueue 0\u0026lt;/strong\u0026gt; 101 spine n9000-11.0(2j) notscheduled 0 111 leaf n9000-11.0(2j) notscheduled 0 112 leaf n9000-11.0(2j) notscheduled 0 Legend: notscheduled - Upgrade has NOT been scheduled scheduled - Upgrade has been scheduled at a future time queued - Node is waiting for token from scheduler(permission to upgrade) inprogress - Image installation is currently in progress on node completeok - Upgrade successful completenok - Upgrade failed unknown - Node unreachable    After some minutes  1 2 3 4 5 6 7  admin@aci-lab-apic01:~\u0026gt; firmware upgrade status Node-Id Role Current-Firmware Target-Firmware Upgrade-Status Progress-Percent(if inprogress) ---------------------------------------------------------------------------------------------------------------------- \u0026lt;strong\u0026gt;1 controller 1.0(2j) apic-1.0(3f) inprogress 75 \u0026lt;/strong\u0026gt;101 spine n9000-11.0(2j) notscheduled 0 111 leaf n9000-11.0(2j) notscheduled 0 112 leaf n9000-11.0(2j) notscheduled 0    The Controllers do an automatic reboot, so if you just have one APIC in your Fabric, you definitely will be kicked off  1 2 3 4 5  admin@aci-lab-apic01:~\u0026gt; Broadcast message from root@aci-lab-apic01 (unknown) at 15:47 ... The system is going down for reboot NOW!    As soon as the APIC Controller is back up you can check the firmware upgrade status  1 2 3 4 5  admin@aci-lab-apic01:~\u0026gt; firmware upgrade status node 1 Node-Id Role Current-Firmware Target-Firmware Upgrade-Status Progress-Percent(if inprogress) ---------------------------------------------------------------------------------------------------------------------- 1 controller apic-1.0(3f) apic-1.0(3f) completeok 100   ¬†Upgrade of the Nexus 9000 Spine and Leaf switches After all the Fabric Controllers are updated, you can proceed to upgrade your Nexus 9000 Spine and Leaf Switches.\n Copy the Nexus 9000 Software to the APIC Controller  1 2 3  admin@aci-lab-apic01:~\u0026gt; scp richy@10.32.32.179:Downloads/aci-n9000-dk9.11.0.3f.bin . Password: aci-n9000-dk9.11.0.3f.bin 100% 495MB 99.1MB/s 00:05    Also add the Nexus 9000 Software to the Firmware Repository  1 2  admin@aci-lab-apic01:~\u0026gt; firmware add aci-n9000-dk9.11.0.3f.bin Firmware Image aci-n9000-dk9.11.0.3f.bin is added to the repository    Check that the software was added succesfully to the repository  1 2 3 4 5 6 7  admin@aci-lab-apic01:~\u0026gt; firmware list Name : aci-n9000-dk9.11.0.3f.bin Type : switch Version : 11.0(3f) Size(Bytes) : 519376842 Release-Date : 2015-02-10T02:47:47.000+01:00 Download-Date : 2015-02-18T15:53:28.874+01:00    You now can start the upgrade on the switches, in a production environment you should split the upgrade to make it undisruptive. As this is just my lab, i booted all the switches at the same time  1 2 3 4 5 6 7 8 9 10 11  admin@aci-lab-apic01:~\u0026gt; firmware upgrade switch node 101 aci-n9000-dk9.11.0.3f.bin Firmware Installation on Switch Scheduled To check the upgrade status, use \u0026#39;firmware upgrade status node \u0026lt;node-id\u0026gt;\u0026#39; admin@aci-lab-apic01:~\u0026gt; firmware upgrade switch node 111 aci-n9000-dk9.11.0.3f.bin Firmware Installation on Switch Scheduled To check the upgrade status, use \u0026#39;firmware upgrade status node \u0026lt;node-id\u0026gt;\u0026#39; admin@aci-lab-apic01:~\u0026gt; firmware upgrade switch node 112 aci-n9000-dk9.11.0.3f.bin Firmware Installation on Switch Scheduled To check the upgrade status, use \u0026#39;firmware upgrade status node \u0026lt;node-id\u0026gt;\u0026#39;    You can check the upgrade status with the same command here  1 2 3 4 5 6 7  admin@aci-lab-apic01:~\u0026gt; firmware upgrade status Node-Id Role Current-Firmware Target-Firmware Upgrade-Status Progress-Percent(if inprogress) ---------------------------------------------------------------------------------------------------------------------- 1 controller apic-1.0(3f) apic-1.0(3f) completeok 100 101 spine n9000-11.0(2j) n9000-11.0(3f) inprogress 5 111 leaf n9000-11.0(2j) n9000-11.0(3f) inprogress 5 112 leaf n9000-11.0(2j) n9000-11.0(3f) inprogress 5    The switches also do an automatic reboot after the upgrade  1 2 3 4 5 6 7  admin@aci-lab-apic01:~\u0026gt; firmware upgrade status Node-Id Role Current-Firmware Target-Firmware Upgrade-Status Progress-Percent(if inprogress) ---------------------------------------------------------------------------------------------------------------------- 1 controller apic-1.0(3f) apic-1.0(3f) completeok 100 101 spine unknown unknown unknown unknown 111 leaf unknown unknown unknown unknown 112 leaf unknown unknown unknown unknown    After all the switches booted, you should see them all with a status of \u0026ldquo;completeok\u0026rdquo;  1 2 3 4 5 6 7  admin@aci-lab-apic01:~\u0026gt; firmware upgrade status Node-Id Role Current-Firmware Target-Firmware Upgrade-Status Progress-Percent(if inprogress) ---------------------------------------------------------------------------------------------------------------------- 1 controller apic-1.0(3f) apic-1.0(3f) completeok 100 101 spine n9000-11.0(3f) n9000-11.0(3f) completeok 100 111 leaf n9000-11.0(3f) n9000-11.0(3f) completeok 100 112 leaf n9000-11.0(3f) n9000-11.0(3f) completeok 100    Final check of the current software version  1 2 3 4 5 6 7 8  admin@aci-lab-apic01:~\u0026gt; show version # Executing command: \u0026#39;version\u0026#39; node type node id node name version ---------- ------- --------------- -------------- controller 1 aci-lab-apic01 1.0(3f) spine 101 aci-lab-spine01 n9000-11.0(3f) leaf 111 aci-lab-leaf01 n9000-11.0(3f) leaf 112 aci-lab-leaf02 n9000-11.0(3f)   ¬†That\u0026rsquo;s it! You just upgraded your ACI Fabric with success. ","date":"2015-02-26T08:09:48Z","permalink":"https://www.richardstrnad.ch/2015/02/26/cisco-aci-upgrade-your-aci-fabric-1-02j-to-1-03f/","title":"Cisco ACI ‚Äì  Upgrade your ACI Fabric (1.0(2j) to 1.0(3f))"},{"content":"I got some strange Websocket Errors on the Gui Login Page, the following fixed the problem for me\n1 2  admin@aci-lab-apic01:~\u0026gt; acidiag restart mgmt {u\u0026#39;dme\u0026#39;: {u\u0026#39;output\u0026#39;: u\u0026#39;mgmt start/running\\n\u0026#39;, u\u0026#39;error_code\u0026#39;: 0, u\u0026#39;error_string\u0026#39;: u\u0026#39;\u0026#39;}}   ","date":"2015-02-23T16:08:40Z","permalink":"https://www.richardstrnad.ch/2015/02/23/cisco-aci-restart-the-gui-websocket-error/","title":"Cisco ACI ‚Äì Restart the GUI (Websocket Error)"},{"content":"As i had some struggle to find the right command, i will share it here üôÇ\n1 2 3 4 5  admin@aci-lab-apic01:~\u0026gt; acidiag reboot Broadcast message from root@aci-lab-apic01 (unknown) at 15:31 ... The system is going down for reboot NOW!   So be ready, there is no warning/confirmation!\n","date":"2015-02-19T15:52:24Z","permalink":"https://www.richardstrnad.ch/2015/02/19/cisco-aci-reboot-an-apic/","title":"Cisco ACI ‚Äì Reboot an APIC"},{"content":"With the introduction of the NX-OS Cli, cisco changed the way how you connect to leaf/spine switches.\nFind my updated post here.\nThere are several scenarios where you want to connect to your leaf and spine switches of the ACI fabric.\nIn this example we want to checkout the BGP Status.\nFirst you connect to your APIC Controller through SSH:\n1 2 3 4  $ ssh admin@10.32.5.100 Application Policy Infrastructure Controller admin@10.32.5.100\u0026#39;s password: admin@aci-lab-apic01:~\u0026gt;   Easy way to connect Claes Leufven just gave me a hint that you can also use \u0026ldquo;attach\u0026rdquo;, the same as on other cisco products üôÇ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21  admin@aci-lab-apic01:~\u0026gt; admin@aci-lab-apic01:~\u0026gt; attach aci-lab- aci-lab-apic01 aci-lab-leaf01 aci-lab-leaf02 aci-lab-spine01 admin@aci-lab-apic01:~\u0026gt; attach aci-lab-leaf01 # Executing command: ssh aci-lab-leaf01 Warning: Permanently added \u0026#39;aci-lab-leaf01\u0026#39; (RSA) to the list of known hosts. Nexus 9000 Switch Password: Cisco Nexus Operating System (NX-OS) Software TAC support: http://www.cisco.com/tac Copyright (c) 2002-2015, Cisco Systems, Inc. All rights reserved. The copyrights to certain works contained in this software are owned by other third parties and used and distributed under license. Certain components of this software are licensed under the GNU General Public License (GPL) version 2.0 or the GNU Lesser General Public License (LGPL) Version 2.1. A copy of each such license is available at http://www.opensource.org/licenses/gpl-2.0.php and http://www.opensource.org/licenses/lgpl-2.1.php aci-lab-leaf01#   Alternative way! If you know the tep address of your leaf/spine, you can directly connect, otherwise you can get an overview of the tep addresses:\n1 2 3 4 5 6 7 8 9 10  admin@aci-lab-apic01:~\u0026gt; acidiag fnvread ID Name Serial Number IP Address Role State LastUpdMsgId ------------------------------------------------------------------------------------------------- 101 aci-lab-spine01 XXXXXXXXXXX 10.255.120.94/32 spine active 0 111 aci-lab-leaf01 XXXXXXXXXXX 10.255.120.95/32 leaf active 0 112 aci-lab-leaf02 XXXXXXXXXXX 10.255.120.93/32 leaf active 0 Total 3 nodes admin@aci-lab-apic01:~\u0026gt;   Now you just connect through ssh directly from the APIC Controller. No User required, PW is the same as for the APIC.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14  admin@aci-lab-apic01:~\u0026gt; ssh 10.255.120.94 Password: Cisco Nexus Operating System (NX-OS) Software TAC support: http://www.cisco.com/tac Copyright (c) 2002-2014, Cisco Systems, Inc. All rights reserved. The copyrights to certain works contained in this software are owned by other third parties and used and distributed under license. Certain components of this software are licensed under the GNU General Public License (GPL) version 2.0 or the GNU Lesser General Public License (LGPL) Version 2.1. A copy of each such license is available at http://www.opensource.org/licenses/gpl-2.0.php and http://www.opensource.org/licenses/lgpl-2.1.php aci-lab-spine01#   Run commands on the Leaf/Spine And now you can run the avaiable commands on the ACI NX-OS\n1 2 3 4 5 6 7 8 9 10  aci-lab-spine01# show bgp sessions vrf overlay-1 Total peers 2, established peers 2 ASN 65444 VRF overlay-1, local ASN 65444 peers 2, established peers 2, local router-id 10.255.120.94 State: I-Idle, A-Active, O-Open, E-Established, C-Closing, S-Shutdown Neighbor ASN Flaps LastUpDn|LastRead|LastWrit St Port(L/R) Notif(S/R) 10.255.120.95 65444 0 02w17d |never |never E 179/52384 0/0 10.255.120.93 65444 0 02w17d |never |never E 179/36010 0/0   ","date":"2015-02-18T10:44:55Z","permalink":"https://www.richardstrnad.ch/2015/02/18/cisco-aci-connect-to-the-leafspine-switches/","title":"Cisco ACI ‚Äì Connect to the leaf/spine switches"},{"content":"Beside of your number and that you\u0026rsquo;re recognised as CCIE you also get some small perks from Cisco:\nCCIE Certification Kit\nYou will get a CCIE Certification Kit, after i got mine i will blog about it for sure!\nAccording to cisco it includes:\n  Congratulatory letter from John Chambers Certificate of achievement Personalized CCIE plaque CCIE badge pull CCIE sticker set Certification resource document   I will post the whole package and its content after i received my Certification Kit\nCCIE Merchandise\nI now finally can shop in the CCIE section of the cisco store üòâ\nCurrently i don\u0026rsquo;t think that i will order some stuff from there, but we will see\nTechnical Service Requests (Case Routing)\n Service requests made to Cisco Technical Support (TS) by CCIEs in good standing, on behalf of an organization with a valid support contract, will be routed directly to the more experienced core TS support engineers. Routing is done automatically based on Cisco User ID; no special phone number or URL is required. For more information, contact Cisco Technical Support.\n Who knows if this really is true? But i recognised a difference if i try to open a TAC Case,¬†I can now directly open Severity 2 cases through the website.\n Open a TAC Case as CCIE, you can use Severity 2  These are all nice things, but i think the most important part of it is the recognition as CCIE in the market and the company benefits.\n","date":"2014-05-07T17:02:26Z","permalink":"https://www.richardstrnad.ch/2014/05/07/benefits-of-becoming-a-ccie/","title":"Benefits of becoming a CCIE"},{"content":"As we all know, the Question mark in IOS is used as interactive help, but what about a ? in a password?\nThis could for example be a task in your CCIE Lab or at least in on of the many preparation labs.\nTo use the ? literal just enter crtl+v and then ?\n1 2  Rack1SW3(config)#username cisco password SECR? LINE \u0026lt;cr\u0026gt;   ctrl+v ?\n1 2  Rack1SW3(config)#username cisco password SECR? Rack1SW3(config)#   Easy stuff but good to know!\nOf course the ? can also be used in ACL Names, Route-maps, etc‚Ä¶\n","date":"2014-05-07T16:07:41Z","permalink":"https://www.richardstrnad.ch/2014/05/07/use-literal-in-ios/","title":"Use ? ‚Äúliteral‚Äù in IOS"},{"content":"Nice overview of Cisco IOS¬†shortcuts, will try to add more!\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21  Ctrl + A - Beginning Line Ctrl + B - Backward Character Ctrl + C - Clear line Ctrl + D - Delete Character to the Right Ctrl + E - End Line Ctrl + F - Forward Character Ctrl + H - Backspace Character to the Left Ctrl + I - Refresh Line and Goto End Ctrl + J - Return Ctrl + K - Delete everything on the Right of cursor Ctrl + L - Refresh Line Ctrl + M - Return Ctrl + N - Next Command Ctrl + P - Previous Command Ctrl + R - Refresh Line Ctrl + T - Flip Last 2 Characters Ctrl + U - Clear Line and Put in Buffer Ctrl + V - Allows A Control Character To Be Typed Ctrl + W - Delete Word Backwards and Put in Buffer Ctrl + X - Clear Line to the Left and Put in Buffer Ctrl + Y - Paste Buffer Contents   ","date":"2014-05-06T22:11:53Z","permalink":"https://www.richardstrnad.ch/2014/05/06/cisco-ios-shortcuts/","title":"Cisco IOS shortcuts"}]